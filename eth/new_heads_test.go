package eth_test

import (
	"encoding/json"
	"testing"

	"github.com/stretchr/testify/require"

	"github.com/INFURA/go-ethlibs/eth"
)

func TestNewHeadsNotificationParams(t *testing.T) {

	{
		params := eth.NewHeadsNotificationParams{}

		geth := `{"subscription":"0x5e68301d4a26b0610081dca8b41eb888","result":{"parentHash":"0xf997a57caff40e89e9f8716568de63f1c1632629d9de750f06c8f7c32bf2c379","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","miner":"0x829bd824b016326a401d083b33d092293333a830","stateRoot":"0x015cfcb599289caeffeb41087745a128768c46d41313e1c31d9133ceb638fbcd","transactionsRoot":"0x10e942a373a9383a6d183dd12d346ed5d692dca75597d23d3536dd4035f4b6ba","receiptsRoot":"0x1889c02d922caf787adccc53e4a48c865615fd02e113eb0e2fb76dbb49f7403a","logsBloom":"0x80000110a40001802020200141130000820013a00200ac0100a12ca121ac40600200041020022808882048480a0812284240808da98800020901ac10d07e4692c500514038100d098207aa080d6004b220400066c286528840004ec18800a3040404c0b02283074918d00000010034402b628180401a0600400c2431001001b40041000252000200404405400020480200020180402808044000900042101ea0020404254010f000514818020081a0808000290100a200291c80209c20982008840011223050100270051640081a1220040000a00500436104208015804058f831323000a0112140121040860030801084000000007200980004400244080081","difficulty":"0x9dd74b59cb6be","number":"0x6e3044","gasLimit":"0x7a4f2b","gasUsed":"0x47c15f","timestamp":"0x5c65fe8d","extraData":"0x7070796520e4b883e5bda9e7a59ee4bb99e9b1bc","mixHash":"0x4ed4476377a8246b7930dedcbbe3c967496a9794ebd0fc2310d1c7906f94db87","nonce":"0xd28cb2800a6b6fff","hash":"0xcf026edb3d84e540aed9ca11b3c1dfa678bd4bda2d4cc31953e006de6292d53a"}}`

		err := json.Unmarshal([]byte(geth), &params)
		require.NoError(t, err)
		require.Equal(t, *eth.MustHash("0xcf026edb3d84e540aed9ca11b3c1dfa678bd4bda2d4cc31953e006de6292d53a"), params.Result.Hash)

		j, err := json.Marshal(&params)
		require.NoError(t, err)

		RequireEqualJSON(t, []byte(geth), j)
	}

	{
		params := eth.NewHeadsNotificationParams{}

		parity := `{"result":{"author":"0xb2930b35844a230f00e51431acae96fe543a0347","difficulty":"0x9dd8742e86a7e","extraData":"0x76697231","gasLimit":"0x7a121d","gasUsed":"0x79e63d","hash":"0xdcecb7c36c48c25886f26e21993ddd12c9e17ae015709bce520650cf6a79e757","logsBloom":"0x2880180008000a8002a00030000024044038020044102000522200001043200b0a0148040a206b048412041000c100a600004402800901160020100811a40981940249801d0160410180400c010181065e544100944e29310085011ca110009303901801122a0080002800084051ac0140208620015500407600049090c004400054103300e5080402a10040002080090500028000000440040100240853203002041008400c0002050408801081801b65b001009000c306006000410002037018b0500a20ae0729442800211205480444c1800fb204291080110821006160c28410200c00010a0014005004c4b4b0002420026780400048985ac04000320296","miner":"0xb2930b35844a230f00e51431acae96fe543a0347","mixHash":"0x00367fe1776614d931a76eeca13bac9680cbf9ac662250b688831d01fb8ad8ba","nonce":"0xd9790000a29655d0","number":"0x6e310b","parentHash":"0xc757d60368bd8ece87adffb9910b8fe5770d85e8c1a1b34482141c4d729780a0","receiptsRoot":"0xb1a98f7ba64eb612acfee18dbe3d3dc6826a95f3b8003251c812af1869701066","sealFields":["0x00367fe1776614d931a76eeca13bac9680cbf9ac662250b688831d01fb8ad8ba","0xd9790000a29655d0"],"sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","size":"0x208","stateRoot":"0x402cb409a1efbfd5fc85d10a04eb49cf00b80d5812f81f85b328416d51d6f2ae","timestamp":"0x5c660e2c","transactionsRoot":"0xdbeb6bd49efffac42f43b5d4c9e739285b088e23e85b1f5ff00be9e7b60f2293"},"subscription":"0x03580d776ce9f51c"}`
		err := json.Unmarshal([]byte(parity), &params)
		require.NoError(t, err)
		require.Equal(t, *eth.MustAddress("0xb2930b35844a230f00e51431acae96fe543a0347"), params.Result.Author)

		j, err := json.Marshal(&params)
		require.NoError(t, err)

		RequireEqualJSON(t, []byte(parity), j)
	}

	{
		params := eth.NewHeadsNotificationParams{}

		kovan := `{"result":{"author":"0x0010f94b296a852aaac52ea6c5ac72e03afd032d","difficulty":"0xfffffffffffffffffffffffffffffffa","extraData":"0xde8302020a8f5061726974792d457468657265756d86312e33322e30826c69","gasLimit":"0x7a1200","gasUsed":"0x6f91e9","hash":"0xe14fdd50f0de3874a6542a48597ff2ffedff9cc0b9e2dc67ec8c09fa16e5644d","logsBloom":"0x00000000000000000000000000000000000000000400000000000000200000000000000000000000000000000000000400020000000000400000000000000000000000000000000000000408000000000000000000000002000000008000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000400040000000000000000000000000000000000000000001080000000000000000000000000000000000000000100000000102000000000000000000000000000000000000400000000800000000000000000000000004000000000000002000000000000000000000000000000000","miner":"0x0010f94b296a852aaac52ea6c5ac72e03afd032d","number":"0x9e2269","parentHash":"0xdb210dc3a36647b48087daf877d82d2184b69df8897d7c92c69811a12b2c758d","receiptsRoot":"0xcffeccbe902d26ce499262095c717c20af7d1e46758941762110c23bd5de8662","sealFields":["0x17198407","0x5144875e245f6d76f1540df1ce87206c2523e3a9f71665b628ac09231b0678231fe36b82aba8162fadeb2af69a9862032a867d6dbef25a2b4a10044fc779cefc00"],"sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","signature":"5144875e245f6d76f1540df1ce87206c2523e3a9f71665b628ac09231b0678231fe36b82aba8162fadeb2af69a9862032a867d6dbef25a2b4a10044fc779cefc00","size":"0x24a","stateRoot":"0xc074e559c3100eaf216a2b3b111182ec1caaed3ede49bf4c02cce0d1398dc428","step":"387548167","timestamp":"0x5c66101c","transactionsRoot":"0xca6c0e435a7dcd8dbe1acaecbaa2f5af52ddb0809f0527007f44eda1bb34eddb"},"subscription":"0xf45ad86ee72015ed"}`
		err := json.Unmarshal([]byte(kovan), &params)
		require.NoError(t, err)
		require.Equal(t, *eth.MustQuantity("0x6f91e9"), params.Result.GasUsed)

		j, err := json.Marshal(&params)
		require.NoError(t, err)

		RequireEqualJSON(t, []byte(kovan), j)
	}

	{
		params := eth.NewHeadsNotificationParams{}
		baikal := `{"subscription":"0x794d5ab7bcff814818e8798f1d294c3c","result":{"parentHash":"0xabce6f5b6df7e81f56053d3c125731d6f94b31181f0664c91ad46d7494e096c3","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","miner":"0x0000000000000000000000000000000000000000","stateRoot":"0x1a874f978fe35ff14806c527efe288496b04888d56cc88935b937aaccf615802","transactionsRoot":"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421","receiptsRoot":"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421","logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","difficulty":"0x2","number":"0x9514","gasLimit":"0x1c9c380","gasUsed":"0x0","timestamp":"0x60ad27b7","extraData":"0xd883010a04846765746888676f312e31362e34856c696e757800000000000000374f32d650a93280d5ca9f52d607947f1b4765e54082836c3fe15c6e819d10d37d347e4ad6d286f144616bf62ccebe2c193b0cc30cee121094628e2bd1f77dfe00","mixHash":"0x0000000000000000000000000000000000000000000000000000000000000000","nonce":"0x0000000000000000","baseFeePerGas":"0x7","hash":"0x6e8b3dc23631bcfde27758b286b229c41b9af761118f13e0a16ce47e2e742baa"}}`

		err := json.Unmarshal([]byte(baikal), &params)
		require.NoError(t, err)
		require.NotNil(t, params.Result.BaseFeePerGas)
		require.Equal(t, eth.MustQuantity("0x7"), params.Result.BaseFeePerGas)

		j, err := json.Marshal(&params)
		require.NoError(t, err)

		RequireEqualJSON(t, []byte(baikal), j)
	}
}

func TestNewHeadsResult_FromBlock(t *testing.T) {

	type TestCase struct {
		Source   string
		Block    string
		Expected string
	}

	for _, testCase := range []TestCase{
		{
			Source:   "geth (mainnet)",
			Block:    `{"number":"0x6e3db5","hash":"0x945fb7ddf4005189d0d183e8d16cec38ce93649c56e0d91e667e6722931e5c8e","parentHash":"0x41fd678d4c28dfebfe23d6e57aacfc0ebcda139dbebeb1ce3209e773e21ae401","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","logsBloom":"0x0a63006dc8a729d80f0b98035687f501f4029c3a022c784c00a9962d92a0a0ce9c56843032a8c142010c04071044861542da56894482a0a52961ac30022702e40120324640820015cb50606f800848540ea0a466104e41c5b016f0034224650449350314448914213104490ee64807472140b529189c36d40702d59404c2422aac32d0170c400210258c450f82809e2c4a800e220326c4280e4a288525569085c392c9a098f0208c491383204840284187e4214060025a670a3b10871d31ec122614fe2b967819138191a8bb45ca5a459dc82c22808385a50c1212ba90438161005c3280603c1363da014d516c34330412c0a0353214395026015c8804d96726","transactionsRoot":"0x856597ade306391c1aac1363e1ea75c88a54475959098637e000884edf6e0af5","stateRoot":"0x2e1ec69e737a1db5bc9601704abbc8753bed9700155cd55ce937a34a4d94cceb","receiptsRoot":"0xd1a8dfeb95a23e62780604446d5e526a56a85737bf18caf89c6d9b0b88fdd6dc","miner":"0xea674fdde714fd979de3edf0f56aa9716b898ec8","difficulty":"0xa1be30c6f4562","totalDifficulty":"0x1ef21fc4f9522f275c9","extraData":"0x505059452065746865726d696e652d6575312d34","size":"0x8819","gasLimit":"0x7a121d","gasUsed":"0x79e266","timestamp":"0x5c67146a","transactions":["0x647e3e0011614fcd5177eb7ef779ffa9e5ec082a82d8670ff18462d372394ec8","0x19faed4edc5880f44e1419527f1bd0b553afb79db46c41f027f1bc38c4363db4","0xcdef70a7a3700f98124a33904cb96484a5514dce233a4c9e34a263a1f3ffc412","0xf108b65071ca92d7faa939b4ac2c5b2bcaa9a033b92aebf987f00de0dbb7bb06","0xe546be1aae63a4152c5d38f95535f708b69f2516f0aba14b7c5c6d367b4a4094","0x316d5e8ef24cc844c30bcf3100d579e977e16f9404ee3e0b97d509b1ef1ed17c","0x51c27b666fad7d467a207a13c8dbf1d919a5955665f0594750178c88e32a0493","0x6e419a85258acc3f5dfc1e4bfe17fa21b155f5bde4942b74dfd60b4d3e1f76c1","0x0af70aa95675990f2a04d48189411ad0ddcc7532071e0335d19db02c9c5e11c3","0xa05ed7dbe227c28b38537564ef57d2462391c32486fd5236031ba6ef4a6a8b84","0xb07aafff3b4e5ab81f452589b1b10e52fb30a7d41f56c31c9a652581f46d6342","0x35fbf44e4451952adf777550abe501d0be07ad4aff9db39630234df21345bd07","0x3b0c1424d99e8e3809067043a5e934c47071bec8e0ab19c81d1c1cc9d6e1fe1c","0xa58de108df42c5d744f0e8eee18987d4c0967aafd4200f9f7c9d843d23922663","0xba097de2aece13b6c1f0c0b3ee0053c78c6f2f57d1356f989e38fcc9486dd9bf","0x50120936e1afc84e559b4d0566d653b4e582ba37600bf169d9908cfe4724d84c","0x12fe5f93b4e216596adc03028fee61cc0a9fde2d4ba12dce004baf0af5341693","0x7405f11d15e71d6d9b214a8b79a6714a4549e3e2fbeef97d06b04136de78d6c2","0xd04ff7169e05b95d209a7926b3883f5f836678595be2de92639d43e61c382d63","0xdd978d26265564fcbe4fb71d70ebbd0f9ae2f99691331b63b3b79db79a845b48","0x8fd0fab413f0cb6cda93199069f5e5c646bd4b6b0f1aa9acfa8cb246214ea62e","0x12b26629472ec6ccf81c56b795c7726a0341fe04f370ed92b057fd6d1f48aa62","0x601f325adafda3fce87cae50da0bfd7c151b33b9a156019798d96980f4cd3454","0x6e8507c6017d1098e9c4124fa301fefb7ca55d7cebf8ff2dd9eac7605d74993b","0x3f4d040402112e819ab50535b25f3437d276e561d635c17144e85b54332035ae","0x50417302f713af5d5cdd73c7757cac9591f4df7c60b4e491f9001a814d196b36","0x5a8ce17d27f90c8bd0ddce81f492f29aab7a99e7a891cc89bfc6ff698786036a","0x988ee989efe390d3923349dcb8c008dfdc105872d68cc895575b1f6fa7264e4f","0xad78c6ed2b774c2ed98d0fcf3d8f2a4786a899592db9fde7895b901675fbe6fd","0x1181808e1bbf1ce63c68296f188045176d6301260b08f8bc7afd0cf33986da7c","0x8103940ffad786f5c8bad4744d00409a9b802befd380872e534e524a965ba0f2","0x4326ed3ded7d6c66d09dc75b4d257c6919974853626e0fba4648e100da14f6a3","0xaf20c08e50ccfcac30389f1676984b7670d4170b287aa3df5199543058f9e7f9","0x17772e4f4606e605180a6656c06e90e31fdcb14953d1383f7ee1a98f88fae7ad","0xaeaddd82d22d266b23badc3c937ade9e4ecc79859e659c7b43d0314bdfabe53f","0xecf4686fd5d5b9230ec93c5e606d7d276c45c07feaa3d05b71a7c3535addf0ba","0x01838eb3beb4b3e6143707b9d0b5e88c7272da9dd8e3e51688f2e1f114c3d47c","0xc591a45a4315542fdf7dd33be1234c5212edf807faa5fe8edef61b4310a9e1c2","0x6a1b0042ff11a549154f4c76ec10b959d36286d9247de2003f0f468fc5c5f014","0x5b054e046c3cacea4c18c0365c7aa27f1faf87996750f53bb0a018d811262ec9","0xf0f4a1c6e29a22c6f986b66f0a18fb729996356037aa8e4b84653a329161ceb4","0x64b3f243f26b8d070d63a574ba9b7577645121b13e317c509431bfdf29de9a12","0xa7d24c2f0100d82a05f1558d28abf6ff4d53ac2d6d98bcfdde094a81f3963995","0x1f583ff96b5965fb8bf5b8409bcc90ea8d3d365c15565d13f21b975e28c380ed","0xbf110979012758691aa933e114c41174873edd50a675c1c39de25d02cf9766cc","0xfd6137e6d72cb82cbc05f1d5dda3705634a8b5720b38b7aa8770c506dd230986","0x20270dccbf950d5498add4e7c6200e6d9bfed3be98de9d84667fc164daa9ac9b","0x32a625a021ffc704b1c211c896d92f20ec983ed7119e0a84c50d06f541e81869","0xe1190b5995f146a6bafd3e80634dca7e3d97d9b8e80e06f886c012f348433f78","0x729fdf7d42ee58edf59e669c5b1c1e276840bab698d16a65e519136c553890fd","0x31f5bb005b623baae344519afa5ccd00ff2753fedae815c78356bcfdf83c4d4c","0x1acc07e84bf27485102efd2e0683caf0ec86f5b42ca4f3ea4faf24f59913b0d2","0x6f846cd00c75f27937adc9b039f05f30e070c416a3aa289f7293f585f025ad81","0x351e72cebbcecb8f0707365261f1044654b0fe60c6353d79f88fc427154db728","0xe5339acfe2e4601edb1cfcb50886d162a026bcef151235a4944a70a3b3710c33","0x66d4e6adad2c8543bedf062391253704ec50fed4e73de2f717dfa5991c3a3d86","0x72b55aee341f0e7c0a38917711b4dc39a5096aec6b9e86fe6a1d78fcc61ed8dd","0xf7b9e5293a5bf6a7039d5b57ae9e43c200c0fcee21438b06717d8b47cfd70558","0x74b34efff0c0b6cbb0e52926fc5dbc4b78f77679847327f2105c383e10d185a6","0x7351594a8b3e4d6e5b03993416fdffc45df7fd020b4a8d7dd3f7e0f7ef2275d3","0x9620bf4d88a71cff8d9eecb71b14f780a3bdfbccd0017f12b2e922f763610470","0x1c20ce325daaa461bd266c7f835e31f36a413306cdb1c28cf334c47bcc9db30b","0x9ca4e91f0be116e0d5087175da967af3cd189a394f894ef74b7a8694cd1b322f","0x45f1ebf5e3db358298df9922b0d1a2356c337f8d23729ecc4f2ab7474b3eaf8b","0x71146ed04cf53dbd3972cc0ee70f2706871ebe560670502eba982cbf5bcb6ee2","0x21230c3de8d9899913e70e30d70f6869ea669ba4192c732b69abc092f468ab56","0x7be973b9f4d1dd3495662d128f332ba93eed5eb96fcf0d974693c506cc9fbcb1","0xdf8f7a74f2f63dcf6067378a485833e00b8c65476cf13a6791dcb3e1b909eb2b","0x9c2ab716a92ed10f254452dba25fd42e311ab0f39ae568131a50510f6ec0478f","0x1dea48b5b4f2b59f48e63afa898c2f8b6852bf18eef905423cf4e914995a5226","0x9b18bceff3d3d84b8a280f8a756411a41d194080c5289014584a3782d52d9fbc","0x76a03962eee6b730ffadc7456a8d30741066586aa0317cd345b5b85cc058f370","0x0f31331dd619f6b25ce169f9ab2976684601981b8229230d966d6429118d28f7","0xa6d21e8fda553422ec212965c98dd11693b82cbf3d059c47a4775f0b761623a7","0x298576e5f213ca0d1fde093efec0cfa37394527faeda0adfad72f5a0dec85226","0x885747f71237e81ddb67ddda119dd5f8b84eb1951b34f3dda54e2278920d0c9f","0x17b54231fc950d0caab393a7615310f361775c86df01b26405a83afb3306e1a2","0x5ef327e61865769685475856e1c3d217fe4e96cd0e9fb6959b2fd3d2fb2f2f3d","0x64fbd9004c32b5103bd929499152bb2eb974b8ca7b0518bb17418bc7d8f3038d","0x981ac0e07ea5ae295442d47a99d622744d42d153c9a7b1b2baa8a4f5e0371727","0xd6b9df704935f8a2d42436a826dd2b5591e54b755affdbcb4b85d6940c5f2920","0x3780ae8d7918cc12ef62d894adbdf4d18ec09f36ba9f40e0d9dd148d8cf3ba01","0xe8cd436928eb7c31f6f0d58e4da952f562f78788bdb3845f4942b2a37a5ae321","0xa08ac3481f88448262ae77255f10a20bbe899c5fa06754a136d88b358e62f5dd","0xeaa4c617df9782f0384eb10c82c5712b8d3c7847f23836eabb2d0e78e61e5bee","0x5f3f645bce75f676ecefc11049384a22eda44d7a989e917ca804a2cb9951c4fb","0x4a24938b53a3085d04b586abeeaf49c3fc2d8d507a4da0442f35cd360b20e6aa","0xc44b7db5526718cca37b7067b0fe1624da090cdb1087792accaf214ec6fd2c57","0xc94f47effe182fab74e5e4757046940f106770be11c36a30bda22d0200e0315c","0x28bf26303fc485a0bca3fe45c46ff400395ef48ae5941f9d2190f5449c12c2b4","0xafe306644134036b7405b97a46c3d9e73740e77c6f9487e8b6b8d776d51d0ad4","0x7f6fb70e93574e8c5055e59fc8a89924911d21a1b8c2a024cf2fea81b693f891","0xe3b873b16a57ebcf71126203ec4b46396654ad62cb73a362840c4d6fc133914b","0x3f347109da7f4dc5ae2fac5d9f9e6fc207b199f58673aa14678304e835c3f94c","0x61587c010588ef3752d2ca9fdf3dcbb3a9958996dfbac48c6d5ae0ffad297f0e","0xc31a73e27f2c54f9311d31f7bf83f5027d25ca8cdd2024db1a75eebae21b7dc1","0xf73321202b3980808427472175439b8e64e1cc4ed9de2b93d920615898b86759","0xf0ade84726dfae82f3679115051328ae11d75da9084f7fb07d4d9ed4bd575dd0","0x7c22a2cdf11a0dab7455f4ed29341fd3e96f4af1c3ca079ea7f9b080382324cc","0x9baf041eb03c917fa75ac3b472e6270e58f70a8ae00886bdc71429807b4ce1d5","0xf714e6d03a6918879a3eaa378ab88cced00c0dbf9691c4acef2a20246c1dd038","0xf234a2a43cc4a7eb1dab61045ba82685f465c2af9bd8524663b86db453126607","0xd316f5815b2c1e94b63b855dee27790b3298931ee3bd87a6a6ae974c8ae8965e","0x01feecd85862b261ae25fce8d5c82cd67557a6d16fe2cf8887156c33cf14ad63","0x44e2b3a8f9b228632047f41e8c91beefca9e92b60115425d4a4d3888aabdaae2","0x5619c96799bcdee4fcaf0c565848ba8ec81bd0c3172d85d665e239ec01d63d7e","0x532ebb4c592b9fae214d46b43f7222ab5cdef9465465e4e562c073bdbaf1975c","0xd89e9ff4f06cc38947b20983bc5b82429c742930b3734694721d7791abe5375f","0xe9fa8313ee149ca5d304a4fbe61587d319f99eb725271705d68abe4895d6b7dc","0x0e6763f0312d81d466ade21ec1b0c62a20cdfac52f9f7155326e29b40828297e","0x6335c8be52f23c35954292294953b7b206cee4ae6e76a3b3bcc537564e2137ed","0xbabf7e0f0eecc97c6c18116aad48432b351354c958ad8434fe770ddb188a33f3","0x1c31fae960a08926f4c9844fb4ca6e329a59d519da04501942f7b28bbb2c7f5e","0xfce1ea63dae37030b9038bb0c586514f6619d5f9630a43e41bdfbc7f3b14d388","0x14ed970ae0c819a7c689b384bfb86f20913d967f46d0b5bcf528b508f924f7ef","0x6c68a4e8749add76bd5093ed4adecbdb69a00d1678fe98408d212528fcfb78c7","0x0c243fceaa9dd327361f379a948e679600cbde99e0e3bc1ea176064cd5b5561b","0xd7032b21d97cbbb806446ae8a81f2061309ff8b6ff7edddb15542d1da16dc0ce","0x7fb7ffd6ce37310a53e601252faba360d9fd8bf052cf3eaf7526642deda4fec1","0x0e6ca2e17196d05431925c5253335ecd5a2154c423f9f96f6f0a87da8f519cac","0x5a4f6b4b00c7c9e0ad1c3eff15106a9a99cf04b7718b73ee83968aa00891535a","0x431d9ba5ba0509c8491fcc68cd6a6ba5ff9f1092ebeb848332ac927fd11fefed","0xa2d41c0d7441d63137d3d29908e2709f66f7e9f9b0f2f245a3261a0851b794c9","0xbf87eb38803d351f6eabc2374e30a46d5718465f594552045e4f00c6f902d280","0xae8f35d63eba0c8949c3672864c7854814561fafbae9e17463762be24870e13f","0xd8db07bf330cae45792af527da36615430ca40096ae8c64d839e1ea706c23ea3","0x8406d50d52a3c749c9de2b88cb46979d2c85661d5353d1c292d7db063b864cdb","0xde3ba68aeb2e01334cba0b5f213e3f49ef30e8f6f7b9e5159a43658136e5ee04","0xdd2ae5f91b216f4d035a8d3adc03f3bd8f818c01c68fc81bbb86d45eea2d5aeb","0x37d80a1f1807ba06f7f5b40b49d97e63c020ea189195a2cac270bd3235abc5be","0x5d48388efa1055784ccc3a2397e88174d56a276894fcdb2e4762bf1f9a8459dd","0x4b831eccdac7578cb7a97ba82abe704fa4302dbad2ad18fa9687996d40c4c4ff","0x3b2fff9180905c735c41c0efd1a993d47ddf984cf4c3234f37bf4c34426696ee","0xe9cd6df8963652452be0ba649422a81bca46ad93af6ce1eb84445a2153e68367","0xe621c9864a69930d0a68e9901c1f851f66b4ff131839ef85c0fbe1dc4406f86b","0xd625b4404d0997b8d8f438f2787ab1664d85cccb497ecc4d46fa8fcbb4964be0","0x9298ab7ddcc27c6ca7feb3458c4e6d4bf7f855d3d73f94149c4256bd88e42e61","0x0ec6c14da3bdd7a688a61c439bf2c5907d270a6f329af7a5933697ea1ec6824d","0x3420daea221705a930ae33053123b048bb8b84f8acb9ee3c8c2ab4b3c7534510","0xf5a0705ae08278e4802f71261e75f610ed3907d8890dc1af086ca1ab5abf42fc","0xeebb60936f897bf71896164c19a4fa5dbf8de7c08436bd4d7780e11c21f965fe","0x3e416994f2cacca9bde43c68394016989a53c15a48ad68198b2ff62bd5e08ef7","0xd5d940883aaecd476e58b9d44a7d5e5d63dc5753fe4c416c2d3b8be31f863a09","0x5ac9b1f37a5f33ce68133e0671b8ece5eb745396a5c48079b1b9ff313dcff53b","0x594ea7f74a711da06ada58dc4bf96be810fbda610ab8ab203bb678b8078fd5d6","0x53a9ac9c6993ee06261a24a069a8b2db2261aa68a041e7a0aa791960b3c80021","0xb77477fcdd3b00bb5e865ae43f43e67bd052f59e51cc41fec0414c9f2d0e81bf","0xe19579ab980413efe4a24cf7be9f5ba3309d562157667ad2fa11f3ba3bf650cc","0x03f160b4bf7eba4e97802cd71451db4c5ced76798d488037ca5b751345c9f476","0xf860f71fbbed7ba42f834973e80b47b23d7889111554d02d37f4891a33cf9e4b","0x7e536ebc01935a67c4623bfc07dd25eea31857d23c94d4391dc2b1d3497bdf44","0x64a903b8eef1ed8404f545bb6591bc010b5bebe15f251238cd882df2d11f7e53","0x3c38607db5676d898ba50d10ea50ff7ec39c4b794f3ac5a9eafb48164bc6a721","0x3c2a08ae6217401b6eef5878cb28b818fdde783e401f118ce9d4b4ce3f6c3a22","0x4f1d65cf0e796a55c51733aa2f867f6086179545de07e4c1210a438bf4b07cde","0x1503c2fca6248eef08f7cf79452ba7059726e48c8088e76ea5c1306a8b5e9924","0xeb8ad1a2e70368e6f41b8ea5f7a8b5cbd4fa977389fd4a31c3ad624176299abf","0xcb69f8f87fe60a5223e516f7602c317da4a263310e908596a58b079c2fe8ad79","0xea3f47cb6603eb2245bf1e1b32f253861d10c46b09678c74ab7b09a26496d77a","0xad3c3cc4c4e91323ad389de7efa23ba66bb67f658afbc86f1b6cc2706f1ce00e","0xd583da14d0934f21c34487044a5045b5687c121a642491b8d8299305ef19b990","0x643f37cb9972f0db19902091ab255f3e090f653284e96b23118b0106dfc5b83c","0xe5032691fdc29065da74df5c8b393a8a67da4cfaad485bcf5ead2a25a665d3b0","0x3579df0c367337210f82b5db6599aaf0d1733460a54a1dcfd700c77e2f7e3ee6","0xd222b3861a33c8ba4aef6f9f9a1f918ec04c80b8dff51d5516fac95076b99ffb","0x9b9ed637bbbb7a917bd7b32ade83c7699adb2a683a931be95c955d64778a4bbc","0x0ffa388366493334be20823503d4c91bdfe3630bd4b42b2722b581f953957deb","0x4f3943869171803ff2ab650e28a17402bbafdaf1257a12b72ed0f3ddbbb0fd15","0xb10b87993755813dfad2fe91567ded28577bd0dab6c7e26a4451b635f057ee25","0xe65401cd46aca1ada9cf8194a86deb4a8c73795df6b9b156ed6b8f4b1efd3427","0xd63d9b4e98ecd0ce9b3249c04f3e8e493b4b2361f66ecd54b3709e19fdaa053b","0xdc15027cbfa35fec3f81202bafacd58041d04529ad6849e355277624009c01e6","0xa010f5d5ca0f2bccea9eeedc1e6e600d2b9b1b6d736ec3be6226a1ed4dbfbde4","0x31545db4d9544101d4d48d40bc12eb146a871a9aa58e22b4b7fae264576be85d","0x534d9b8b156f6b69ae88a53c6db8bda344630b0042149bc70042431df1cc25c0","0x2000334fa3356e10eb747eb9cee229c7491f38ea18dafca1d9e227301b79d22c","0x220b35a208e4374814a2e9423c8175dc11bb1c16c98c4c0dd619332def03e3bf","0x735ace799d4db5bfd934c70062765c572ce0aa78559a2c5fe39a6389f2e3a273","0x0cf3c2db1eafeaffe94f218c581f55a56f1e531016e642582c53e58decae3b1b","0xd02d71303c0eebf496527422808c4b994639aa8c072a74ab39ed23a0ae0a4a32","0xca5ef89c91e0f02249bceb1a56a935e218af53fce96ae8603b6d152b2553704f","0x8e6f536a66512c859bfe6438f316f6f1a2687b438598b0a3ccf45936a96e4672","0x01fcddbe016f047986a2ff75873a696b6956a077e70911df55e0bc698edd0970","0xd992b7cdf3bc5526fd97d6e8772787e31606917cf22bd629293bd712037e301b","0x41d88fe45c414c1841d7fa9eb587349498af01cb84d3d0b1e40bbf98973b239b","0xce387909a34732e27aaf0195d92bffa20b72c9eddbd6d524f9b4ba82e24be980","0xe7a91f03ad685c0f077ac0800328f965486fb79b558150c5e7e1dcbab75b5119","0x0a7ed37d59936f2d4712e75802156bcef93648356acc8863d13d6f7f81500021","0x2f3dd00a3e834b0ca2288375e82dd7e7084f7d528f41d72effd501e8371ca7b3","0xb174d7e2c50e07d653ca6389a10657916a6b30291caf341f19e193cc82420628","0x4f16247222887c9f905f5fa74b76e1136e817fa8bdb1acbb340f0674d04efbc6","0xeb9747149ae2214987b4c6e07ba294cf706ff5a155ac7d4f9c88ce068208f0f8","0xca106bf51fc74b32a077d3e16b3bd395670c285159fb205beca251f935225ed5","0x2154f94a466860c95a4e02e3d0f8605fe25a901bcbbe191f05feaa3d55eb3c93","0x03b780c07ae41f8229c1b7a551d4df41a480812f1f7c47036a0f4cd42f9119d1","0x24027a2bdbd7c92a888158a1b86a09970ef8accfaa5bee1a4e8357c85c3e13f5","0x2e5df714a28079638e2e7c970dddf990ddb76b61b23639e7bd7e5851eaec26b9","0xc38a9a77c861d04a4cf803e731deda93f4b473c7c3ddc1e8545df163eb04e4fa","0xcc855aa0ffc45ee252b9801a001dc93bc24ced3c80097d76b7b2390fda3b710c","0x655f099f98862e301eabb5bcfa269191a48c363eea73b1559eb97545f5aa2e36","0x5168950c6a8f7097ff0d5fa1be064f3ee45a50154d6262fe7ae9df6e817aa80c","0x27b29a7ea2128b63fc2f466fdccd39f9fc209b8172f061fa33188173312973dc","0x08c6a1941e93f37685083ac69e6f1eb36d68a8fe5105834a98fc254de091f6d1","0xd47436fb3ecd98d24dff2b131d465416e8da1dd660f19fdec51b43b2d0923c28","0x3091b6e795ce5ffbd453fd884c416dd84c3ff73c9b0b7096a6b97901dbf92084"],"uncles":[],"nonce":"0xd1afd24711843aaf","mixHash":"0x4b0d476f373511a98d42319a5b622faaf0f584114ca9425347be82fc9ff91413"}`,
			Expected: `{"parentHash":"0x41fd678d4c28dfebfe23d6e57aacfc0ebcda139dbebeb1ce3209e773e21ae401","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","miner":"0xea674fdde714fd979de3edf0f56aa9716b898ec8","stateRoot":"0x2e1ec69e737a1db5bc9601704abbc8753bed9700155cd55ce937a34a4d94cceb","transactionsRoot":"0x856597ade306391c1aac1363e1ea75c88a54475959098637e000884edf6e0af5","receiptsRoot":"0xd1a8dfeb95a23e62780604446d5e526a56a85737bf18caf89c6d9b0b88fdd6dc","logsBloom":"0x0a63006dc8a729d80f0b98035687f501f4029c3a022c784c00a9962d92a0a0ce9c56843032a8c142010c04071044861542da56894482a0a52961ac30022702e40120324640820015cb50606f800848540ea0a466104e41c5b016f0034224650449350314448914213104490ee64807472140b529189c36d40702d59404c2422aac32d0170c400210258c450f82809e2c4a800e220326c4280e4a288525569085c392c9a098f0208c491383204840284187e4214060025a670a3b10871d31ec122614fe2b967819138191a8bb45ca5a459dc82c22808385a50c1212ba90438161005c3280603c1363da014d516c34330412c0a0353214395026015c8804d96726","difficulty":"0xa1be30c6f4562","number":"0x6e3db5","gasLimit":"0x7a121d","gasUsed":"0x79e266","timestamp":"0x5c67146a","extraData":"0x505059452065746865726d696e652d6575312d34","mixHash":"0x4b0d476f373511a98d42319a5b622faaf0f584114ca9425347be82fc9ff91413","nonce":"0xd1afd24711843aaf","hash":"0x945fb7ddf4005189d0d183e8d16cec38ce93649c56e0d91e667e6722931e5c8e"}`,
		},

		{
			Source: "parity (mainnet)",
			Block:  `{"number":"0x6e3eed","hash":"0xf70ff5d4a94c8726ebc5fd57cddc80cb26a6905ca3b490066497df9322b573c0","parentHash":"0x844ab2d9cc9b8c6adeaaf1b6d07ab82a22fc26b375d378558739f7c92690841f","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","logsBloom":"0x2a019001000003858170041200828d92b0241082206038220639206402a8006a0011410805417340090064209840c222c2531042d92901410f41a09c20a0200aad0098a09969822040409008c010200f070001149c0402418101372d0168618084a220550240178c11200448c4482801160285097290402482244810a20004100106a204481004144070c4c0088486181440836107080840204c0022404003006b10c010691080020408c68204d009128000082c02008186c08280a301230b33d18871168916120380ba52612a322440198a2c04981d4c0d2023441aaa06314810113020400210a0388008c08501918140341800600301a8045c2021041000a6","transactionsRoot":"0x7a31b5de7f70ce2df521cc0205b01c53d0ba5a2c83081c6c73f2e64c99e3d471","stateRoot":"0x0e92f3a0329e88beac64a11f54b5298e624ae1dd7914b697cefee1772d464b00","receiptsRoot":"0x5ca9debd419d157120c5502db85bcd9a3ebd5c37e546f60c90da223069256eb3","miner":"0x35f61dfb08ada13eba64bf156b80df3d5b3a738d","author":"0x35f61dfb08ada13eba64bf156b80df3d5b3a738d","difficulty":"0xa15535a7cee3e","totalDifficulty":"0x1ef2e3155a73d0ae3ee","extraData":"0x66697265706f6f6c2e636f6d2f7335","size":"0x69b9","gasLimit":"0x7a1200","gasUsed":"0x79fd8e","timestamp":"0x5c672daf","transactions":["0xbce54c9bc64808fb7e489830c9c4f1b2cc33e98c1538393f085525c069c21451","0x7b41b0630999cb71d21b83e6c61800cb02d1d0f97dd9a638dd33a84737ce8c2a","0xa461c10bac13f93199818a19d5327120c84e6243273f70a0ab1b9246ff980e05","0x1893509217e572f7f78951327cd7c5f5645e620a0ecd6525bb5882310ee53e94","0x079156ec5a5db34abb316f745ffa31aff018aca1788646aeb5bac98161e10b46","0x7a5291904745a77ee11821b0c1ef515195a3e33b6c1a12288232a5aeb5f1cd27","0xcf6696eba46f2910acd553d99d097bda8d91fb26569715beae7de0cd2f5e9a6c","0x3b91afb02e62e0c427224c3b7810a0b4e955cb96399ef57cdb4f6b408d9b2813","0xe749bde06dc7d078932fcfaeec1853578b9542c6c6cf97c844a4ce533b2a42bc","0x61fefb4ab0ce17b5a3a78a7d98d8d05465ca34f7b878e6638de472275d71d9e8","0xbee7ef02a3d8f28ac8cb8c5bb881298be67a9ea81e824682ccd4df09a0b5822f","0x694223925a9caa4c4401af0a5066a6b4e73c37524b355b187e58f55b57158a14","0x8c1650b9858de9e792f4a5c70085b9fa6cd701ca7c902c33ef3ccba45c70aa79","0x0dde1c991b68834d489865da5d4f17f85f72f673c5b038faea99ce8fc616b087","0x0d93e631e3b6ba65cdf438c773a183f4cac030a16f4d83476837f7dc21b538c1","0x9480f3a3f134ca2d5e5ddaf1b2b037cca2b91f89a6d05bbc8e296c30eaa381bd","0xa7a473dcc5595e25dc5f38e5003f3c5bfb1cd49c5920016da621ab4480b61d67","0x01e04bc3069894f4f6ad3c6524ecc758a78ba2401fd63270824fc7e7f77c61bf","0x0c30ce556e6e956837107ae033c7d48dc2f522ebdde00caae61e2f7874562acb","0x9785746b4763822546a06e8090011a15db49cc188a79b946907f2e5b8bb3d5de","0xdb5e3836199e17bbe74dc44cf435f35ea3bd10fc1d2814a143c08d4ba9f8605c","0x5aba9644215c45ade85d09ec13668b105e62c2451d15aa00dd181c6dfcce21b2","0x5be6f00c3c14a9f1bc85814185d873ad3f13763c234d5a0cc7cd018c9c35f21b","0xb73273c159e24c80a47655f930707f5ca91082b5bbb7394885dd62cb8a66f92a","0x58d9057097d4fae1fd1194f742ab32c0f122d227d49731b080b4111975b203e4","0xee9403490d97a9d74ada5191cde0c72b5c2f3a6b3143f6bb921665d2ae1ae8b8","0x8344836a63611ad20b25741f34c95a211c0ae048270dfbaa0c57116506046545","0xda56a03e0d6b5b5493983893f9f153a19f0b87739192eb5bb80e5ce4e34798c3","0xb436c89e48eefea5540709f39793d0b065830657ba84aa8a07d81ec846b03b00","0x2228dbe3edcbd6a340d7c091de34e80d1b7fafd9adc2d24db0d4de315facd0ac","0x2b576ad3ab51999e2fa377a735148277cfca4637dc5af472f28361a4a0a02968","0x0ee5d316ea256b3597715f98c70474e2769fdd46bf6b480693a353025cc82216","0x15d59fd5196386eb2f7f09ddeedc539c933481f5633c3cd5db3884bc5a015c66","0x80633333118c5bf59a04622ee32ca01c0a1a5b3cbc8ce9de9ef2d7b3f79ce58a","0xcc313ce0747412a5aa5d56c542328a778ae6b3cd7244cd80f19809201f0acaa9","0xf5d71f24baec28d69d1860bb69032b98b2e09e7e86fd5fe4cf116eda7d13022e","0x769a550043fd4e4c4e55fa5aacf1d14f82365fbe196b5be0a406015589068e18","0x20417b87012eb8e92483fd41377167430526bdaf00136c6ff8d7b47438f38c52","0x1daae943d42f299ada0847e6db4bda91118c03eae04b65b3988ade7a57bd2e35","0x15ef272c78b209bd93694f2b9c4a9194104ebb7b1cf5f78984ad56f63644ac3f","0x972fae1104929d52f6879928e513618cbb31de6d910b068e7630c0a69387854b","0x0a9c4108ee28ad9c268f041fb6ee951841377414f58025f5fd05db4e3a5ec03d","0x3268a4523ab87ee09cc8f4e489cc988d34055e153b5a731534e7b9ae7d83caa4","0xb206cee5f5050604aa0468d7ce56ec1a4c80f01fbc0ff3c07a22cc2efd6ff774","0xd703627713bdca0909453e3a03087780bae94d9c187bbc3796b90ead5b51e205","0x47b3df99ec42972994f5400dbbfbb0d52ff1448ef1893bbacf2be8e955c9223e","0xd05e67f8f9d77f0825cdc393f16d61cd2050503ba817b5af80d94b35016df2c9","0x5cb455fc369108391d3e8ebec428a967a2a19b0941cffa6bd282c727b24c8865","0x59663870133cdfaf6c4e2975e7cf7cebe0f6415ac2dabf178cabb4439cfcc408","0x1d8abc11e4578fa94952ee267a52d64ee7139c6b853084bd9bf2afe58447db9e","0xe6e7b2ac53ad798a5cad206ea6d779a4ddb05907b711a2506171ac36166abd56","0x0514fd7d62a972c3ca40b5cb23fffc9648ef7c86bcf7c25f23286ab6cf3835c7","0x0dffc30986d065d9c40fc7a4e36239b4b38f0a062ba003e82045b0bc6a90460c","0xef4e7be53fc15706b28cc94e7aa8c07fc9a5d4aaad3c8ff34d88107a3d12e4a3","0x3a1f9ec4d6620b26c6fe760e945ff58a5bf28a0e880deac773bae3ff23a7d859","0xcbed052a3f90991818207bb4eeb956fd30dc9d0bafd39aecffab77e689c8db52","0x9812008a88dd25eb58a98f30cb9b2eeb1b570c6e460df29eea769effee1ac9ea","0xe0b8c72419a65a0abb6984cafc0119e74b07898da21a1da392004cecb47c7fe9","0x6af21797c3d88e154c357729d48df2e767303ae2d0bfd18c6b15f2b1c94bca74","0xe70de2c07a90b311f55bccc0b4938e64f9bce84329730577cbc16d20a9a524eb","0x4b513a88bfc08453a84a1935a45e2d9f3bd8acb6311f0974948a10e4b9b434aa","0x10b12e6afe70dc6c6da5b812d94b09631a1db0ee7f0fba6c1be2967ca9229a1b","0xd3b6309336eb5ccafcc5b286e3edf102c3ccdedf4e3868d88c975b8466eb9b78","0xb814d5015b864bc78d3a6b02f4d878c6086e76607d9a7bae060cd01f6e4231f8","0xf650c71afd9f8ef2d9206180e570db03acd4293549ea89040ecce789e30829f1","0x182ed484606abaf3764ba45d894da2c073e510765a8fbd0c420e71135c84ad77","0x3661bcd5751a88ebefaf0e0c968df643bcbf1b31754345e3bb54eeec954c0066","0x2a0b46d0a0f183543ceba4351280ba9edd5f5fac270988108100ad5e2f5c7f1e","0x562665d5fca9f268a72908ceaa720bdf6a2c29920d6fbfb649907172f1981df5","0x0fec039102a72cb96f9e8cc9e9328debcc79f788b8b2a86bdbaabcad13750478","0x53c01095febdf5ec509901ac99713f010a2c263e77c0d2e51b861429ab5c5d57","0xf83894ae97b609483f764e7535638477b073cfe5f646012e868777cd02e0a64b","0x98a13e90df1a817580a0dd18c702f9770e63a6c670779e29bf4f669cb3395405","0x29564b29c901c556dfe9765797d5200fd263e669c008d6eb31d51e8365aea1a7","0x0052318c8e007fdb4519861e82027fb2046beeb01c2e7665cdb50a1240e0ec91","0x02a66d0e19ccdf4379793c8ed7f93ff3eebf1f329b73f2497efebd05bf0ba177","0x672609028bcbd8800265bc258e8988cff591eff40eccfa6d19ba191159350d90","0x450015fe2cea4b014902b3cc96a6daead32ee094e66ca9ef90e408c9a4ee7175","0x969b9ce44421c9a046722e2ed76ee93bf66975dc97fd7f2df8d57023e655ef7c","0xc8de70d098b6bb2de383c4e28f913161cf010d0d75e21ac1f4f8b3c7c11f7baa","0x5de0a716bf58ea7b107defa35e4207a2503c662580c54ac34955bd5c5b11eaea","0x342157eaeb3a44658dff84fba02d3a223c3dc7cafd4ef22460f18316080fff15","0xc0dc5dc401193c343e7fd57e613741fb1d3a3853788d7c7eb18c161821e1721e","0x2158cbe328e75741094f6f54bc5de49399116c4ba4c2de67ba691be0999778a8","0xd46dcb22cfa959369ee4641e1f62f4a56211c6d2294089596f554549af83d7dd","0x49f19f7fdeae005ccc3ced11cc7acf012303fd665bb96f91b3c73dbcf5ae0c99","0x9e4a5ce4f215d2c1339e842dfc635fc6d934aa4ba170cdecc042dae2cad1976e","0x304710b4c27d6ed0cc1c8cff0e84ba1d70298a634722927a9e1be6f0fc8100dc","0xfde38ef3fdb06cd0993bc5e9cdfc5e6e3c5b399315e292f246b55c0ebc02ab53","0x21baa153d73353f3d9b200a2b3e1ccc4db4506e11cc3f1f5bf112b4f3477c901","0x6212efd9999472a3a324a0c4092ecef7bb4b53f4111ee8bd60d414dd704a3272","0x6ab67cbf13e882938ee3c3fded59f20dbbe9754f55c5735d6ed01ffdeefd3058","0x9c38decede03c825a5b376d040ee5ad54a1411ae00b4167e51a1ea243c971f15","0x995a6fc2c56948ee2dfb26ab66f511536b1e9f920488ce1e4bd66b3ed2e77874","0xc1b051322350ad70517e81a5b62ae94e0a9405998350409e27fa497cbfaf0f04","0x992e08c45456cab6bde81a328509c36d39a7fad8675f72a8e30ea83be087a9a3","0x5e86f131f8badced2e6636422dcb0505b11bc513cdb36dca4b2d3a6e75c0d368","0xb65ef04ea844dd8ba31cf354af2352e1bb3f0be5f246c6872ca6f08bded7e670","0x997142eda13fc5e10ff07ec35716a85d68383a5d2961de53d004d27adcee2350","0x6775a6eaffe9a0fcaa044935a6fe77d1faf7c7d19e441dbc3262dc8c6e558fd0","0xec9a54849c8fa1e29c560996bf953837a68e7efc60046bf5a0eaaba335a97723","0x03bdaf794e4409b87d249bfd05e817619672732b8a198d4fcd991afe3bba8b97","0x1e28f12939d071f5f6c221448807a9195e9947492e8b22d13adcf4105f83b6dd","0xaa1aca491cf70385e0576bd75f26d3781ce02533c8be7ab686cf5dc122d734c8","0xceab4bc39a00745103232b9dbb8052a67145dc2a9ec5f702569c204204d20270","0xe94d178ff945ce03f05e5adfce3fb4fc667c7b318aa3e2b9fa766781dc423779","0x34bc2b5f69c990079b4fdce3d3b8a6fc0e9919f3fe0c9e0fe997fdd92c838312","0xe4e4192543fa80b7c4ef5f5fe9633d675fd20bb4729f69ca8809fa14fefb17d0","0xadf3527a03b25e1d8a72917d6d87b1283c85150d119a8291f4f2b4a8c1221d6e","0x4fd87b474e5ee3909096984af5a183379303a7473974e52dcf7483f6b9eead73","0x8228899a4ed56d310ecf9476c0e6426ac4ad9434193641e0ce2301aa3048e21f","0xeaa9648d3e5d101575b3d7e6f1b53fec706f983fa90ae96b21a90d299386e4c8","0xe39c6a9bdf8ddf4feaa45240fd97e49faac44c5e34e6e6881f1dc79c90d02f1c","0xc3e04f8a50f6df909322f93f9fd02d7fcbcb2b25f77d0e6e5b542da29ff67d0f","0xbebdcf02ef28ab2410f3fff9df7cdbbf7626b917fafab7b8c6fc7f6906c312b7","0x24903211c91100c27fdde6eccce335c7dbf3936fc8ac3ab95bc8858c1f657e50","0x1c2d44e724499d3457c6ca5891b1bcd4d38c3b78e33430b3cb25bf302ab9dc62","0x17cd7edd2dc8dd3aebea75a7ee42ebf7853330422d07b2da985a0ffa2db480e7","0xa52111442909a3f3d9533cb4458845c0950607993b555746774b3d1d84dcabc1","0x2596f00ad948ef855d1d03f312ac7390f2d400764d29b0fbd4c25f2f002b23aa","0x475a1391699f208e1c11a8af6fef990c3197aaf7efcfd3b02675e53598fb1991","0xd570e853b20cbc326e0667708c7c4ca14424a99b898bb94dc862f44ca655355c"],"uncles":[],"nonce":"0xeb5a76e0036a53cc","mixHash":"0x8b85532107a5d43995a5c9ab942227262b669c7b053b8ec246d987bc10e699cc","sealFields":["0xa08b85532107a5d43995a5c9ab942227262b669c7b053b8ec246d987bc10e699cc","0x88eb5a76e0036a53cc"]}`,
			// NOTE: parity actually appears to return wrong-looking size and sealFields in newHeads results.  This payload has been patched to correct values.
			Expected: `{"author":"0x35f61dfb08ada13eba64bf156b80df3d5b3a738d","difficulty":"0xa15535a7cee3e","extraData":"0x66697265706f6f6c2e636f6d2f7335","gasLimit":"0x7a1200","gasUsed":"0x79fd8e","hash":"0xf70ff5d4a94c8726ebc5fd57cddc80cb26a6905ca3b490066497df9322b573c0","logsBloom":"0x2a019001000003858170041200828d92b0241082206038220639206402a8006a0011410805417340090064209840c222c2531042d92901410f41a09c20a0200aad0098a09969822040409008c010200f070001149c0402418101372d0168618084a220550240178c11200448c4482801160285097290402482244810a20004100106a204481004144070c4c0088486181440836107080840204c0022404003006b10c010691080020408c68204d009128000082c02008186c08280a301230b33d18871168916120380ba52612a322440198a2c04981d4c0d2023441aaa06314810113020400210a0388008c08501918140341800600301a8045c2021041000a6","miner":"0x35f61dfb08ada13eba64bf156b80df3d5b3a738d","mixHash":"0x8b85532107a5d43995a5c9ab942227262b669c7b053b8ec246d987bc10e699cc","nonce":"0xeb5a76e0036a53cc","number":"0x6e3eed","parentHash":"0x844ab2d9cc9b8c6adeaaf1b6d07ab82a22fc26b375d378558739f7c92690841f","receiptsRoot":"0x5ca9debd419d157120c5502db85bcd9a3ebd5c37e546f60c90da223069256eb3","sealFields":["0xa08b85532107a5d43995a5c9ab942227262b669c7b053b8ec246d987bc10e699cc","0x88eb5a76e0036a53cc"],"sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","size":"0x69b9","stateRoot":"0x0e92f3a0329e88beac64a11f54b5298e624ae1dd7914b697cefee1772d464b00","timestamp":"0x5c672daf","transactionsRoot":"0x7a31b5de7f70ce2df521cc0205b01c53d0ba5a2c83081c6c73f2e64c99e3d471"}`,
		},
		{
			Source: "kovan",
			Block:  `{"number":"0x9e3695","hash":"0x983c642e7eb36e078fda9dae4f5276915b3b7e4f62d7d1b30bd5528d81c32b22","parentHash":"0x935e3d8641f5d3b3e3f8612e0aabd7115c2540247030d944a0dc16362d5d7f5d","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","logsBloom":"0x00000000040000002000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000002000000000000000000800000000000000000000000000008000000000000080000000080020000000000000","transactionsRoot":"0xde0a3059e2b4e310f386ed4f8af2c808a5f0cfffe5dc12cf33f1a045715864ce","stateRoot":"0x483fedd70f7c0d058cdecd1de63cd48d51e05fd2c7a411446e3cdaad3a167c44","receiptsRoot":"0xa6b6db04a5df4799e96af56d0ebb822c9fbf4d4dfbae4471f699d1b4da488f3e","miner":"0x007733a1fe69cf3f2cf989f81c7b4cac1693387a","author":"0x007733a1fe69cf3f2cf989f81c7b4cac1693387a","difficulty":"0xfffffffffffffffffffffffffffffffe","totalDifficulty":"0x9bf386000000000000000000000004849ef87f","extraData":"0xde830203038f5061726974792d457468657265756d86312e33322e30826c69","size":"0x24f8","gasLimit":"0x7a1200","gasUsed":"0x25ef62","timestamp":"0x5c670854","transactions":["0x8ffcb09d647e7c20719244c3b1e4ad66b15b1533ed96ef3b91d06f29a142f0f7","0x2f92a8b443c44a974c75003385bb1e0fd934fe63523824097c13b2772f862c13","0x95083b12304bd476187c6af59fc22fc9604737e68e1e24df676c4ed5a532d714","0x83a88d000062e5d67e31c1a447645496e003bf03c954afa1b91acaf3efdc214d","0xd82d96078c12544a323d2dfdd4c8d99572a8a4c6d4137476f6834f2c0002c7fc","0xf9f0199277a68fc19005db2ac34e93f6cf6ec75b8e5733fc06380c15cc93849c","0xed1fb1b40d3dfca34eb09b63c9b4ece8cf07462c486c3cdbbe0eff07e1d78eaf"],"uncles":[],"sealFields":["0x841719c215","0xb841b3a65ba0e433c41b955b6c1c8fb51e0466e8b360298c9d3500a64dd2bd0e8ba95d0a64b6a78aad3407669b1cee69842a6d8cfa2301b507fec48d17f5aa458d1100"],"step":"387564053","signature":"b3a65ba0e433c41b955b6c1c8fb51e0466e8b360298c9d3500a64dd2bd0e8ba95d0a64b6a78aad3407669b1cee69842a6d8cfa2301b507fec48d17f5aa458d1100"}`,
			// NOTE: parity actually appears to return wrong-looking size and sealFields in newHeads results.  This payload has been patched to correct values.
			Expected: `{"author":"0x007733a1fe69cf3f2cf989f81c7b4cac1693387a","difficulty":"0xfffffffffffffffffffffffffffffffe","extraData":"0xde830203038f5061726974792d457468657265756d86312e33322e30826c69","gasLimit":"0x7a1200","gasUsed":"0x25ef62","hash":"0x983c642e7eb36e078fda9dae4f5276915b3b7e4f62d7d1b30bd5528d81c32b22","logsBloom":"0x00000000040000002000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000002000000000000000000800000000000000000000000000008000000000000080000000080020000000000000","miner":"0x007733a1fe69cf3f2cf989f81c7b4cac1693387a","number":"0x9e3695","parentHash":"0x935e3d8641f5d3b3e3f8612e0aabd7115c2540247030d944a0dc16362d5d7f5d","receiptsRoot":"0xa6b6db04a5df4799e96af56d0ebb822c9fbf4d4dfbae4471f699d1b4da488f3e","sealFields":["0x841719c215","0xb841b3a65ba0e433c41b955b6c1c8fb51e0466e8b360298c9d3500a64dd2bd0e8ba95d0a64b6a78aad3407669b1cee69842a6d8cfa2301b507fec48d17f5aa458d1100"],"sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","signature":"b3a65ba0e433c41b955b6c1c8fb51e0466e8b360298c9d3500a64dd2bd0e8ba95d0a64b6a78aad3407669b1cee69842a6d8cfa2301b507fec48d17f5aa458d1100","size":"0x24f8","stateRoot":"0x483fedd70f7c0d058cdecd1de63cd48d51e05fd2c7a411446e3cdaad3a167c44","step":"387564053","timestamp":"0x5c670854","transactionsRoot":"0xde0a3059e2b4e310f386ed4f8af2c808a5f0cfffe5dc12cf33f1a045715864ce"}`,
		},
		{
			Source: "baikal",
			Block:  `{"baseFeePerGas":"0x7","difficulty":"0x2","extraData":"0x00000000000000000000000000000000000000000000000000000000000000009d3524c9acd91e52c9636eff76173d1de58419611da303ee131bc4dae18ecba17a01174694cce18611bbd691b24f171d5a68ae208e43f792b105fdaf950963af00","gasLimit":"0x1c9c380","gasUsed":"0xcf1f","hash":"0xe47daeae74c521fc4a8e7fece9820bcb68a1d83382ef06700e67caba4245ef47","logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","miner":"0x0000000000000000000000000000000000000000","mixHash":"0x0000000000000000000000000000000000000000000000000000000000000000","nonce":"0x0000000000000000","number":"0x8496","parentHash":"0xd8c32ba3341e8a239c41390fd68fd51a76ded9a4cc0260918acc1a54e0f3315d","receiptsRoot":"0x340f7266a1624ed1d28caeed494df579e00e1e2355587d256c333b7f80ab1756","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","size":"0x2c3","stateRoot":"0x93bfec7c3496021d3ff4674ad96ffe856e1f3cf1fed59770756ab4a074d0e535","timestamp":"0x60ab38f3","totalDifficulty":"0xf94c","transactions":[{"blockHash":"0xe47daeae74c521fc4a8e7fece9820bcb68a1d83382ef06700e67caba4245ef47","blockNumber":"0x8496","from":"0xaaec86394441f915bce3e6ab399977e9906f3b69","gas":"0xbc614e","gasPrice":"0x2717","maxFeePerGas":"0x186a0","maxPriorityFeePerGas":"0x2710","hash":"0x0159dbb589269604b6ee9879fce507a6a6812be569f7c932f455bf66f3159db7","input":"0x6000","nonce":"0xeb","to":null,"transactionIndex":"0x0","value":"0x64","type":"0x2","accessList":[],"chainId":"0x66a","v":"0x1","r":"0x2473341eed9c3d64c05fcd1df85e5eff021cde441769e3a52fede9e0f1d298d3","s":"0x1f91bba26132cb1172e1a85c5d13e8881056282070710229fa99dfaa8fa911e4"}],"transactionsRoot":"0x658830e11eab0d07fd04dfe524711e509111ad0b543bb310296cb67a638445e4","uncles":[]}`,
			// NOTE: parity actually appears to return wrong-looking size and sealFields in newHeads results.  This payload has been patched to correct values.
			Expected: `{"baseFeePerGas":"0x7", "difficulty":"0x2", "extraData":"0x00000000000000000000000000000000000000000000000000000000000000009d3524c9acd91e52c9636eff76173d1de58419611da303ee131bc4dae18ecba17a01174694cce18611bbd691b24f171d5a68ae208e43f792b105fdaf950963af00", "gasLimit":"0x1c9c380", "gasUsed":"0xcf1f", "hash":"0xe47daeae74c521fc4a8e7fece9820bcb68a1d83382ef06700e67caba4245ef47", "logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "miner":"0x0000000000000000000000000000000000000000", "mixHash":"0x0000000000000000000000000000000000000000000000000000000000000000", "nonce":"0x0000000000000000", "number":"0x8496", "parentHash":"0xd8c32ba3341e8a239c41390fd68fd51a76ded9a4cc0260918acc1a54e0f3315d", "receiptsRoot":"0x340f7266a1624ed1d28caeed494df579e00e1e2355587d256c333b7f80ab1756", "sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347", "stateRoot":"0x93bfec7c3496021d3ff4674ad96ffe856e1f3cf1fed59770756ab4a074d0e535", "timestamp":"0x60ab38f3", "transactionsRoot":"0x658830e11eab0d07fd04dfe524711e509111ad0b543bb310296cb67a638445e4"}`,
		},
	} {
		block := eth.Block{}
		err := json.Unmarshal([]byte(testCase.Block), &block)
		require.NoError(t, err, testCase.Source)

		newHead := eth.NewHeadsResult{}
		newHead.FromBlock(&block)

		j, err := json.Marshal(&newHead)
		require.NoError(t, err, testCase.Source)
		require.JSONEq(t, testCase.Expected, string(j), testCase.Source)
	}
}
