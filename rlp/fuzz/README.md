RLP Fuzzing
===========

This folder uses `go-fuzz` to fuzz our `rlp` package with random data in an attempt to cause a panic.

To use the tool yourself:

- run `make install` to install `go-fuzz` and `go-fuzz-build`
- run `make` (or `make fuzz`) to build an `rlp-fuzz.zip` and run it with `go-fuzz`.

The output will look something like:

```
2020/04/02 16:31:05 workers: 4, corpus: 128 (6m39s ago), crashers: 0, restarts: 1/4799, execs: 3210648 (4951/sec), cover: 244, uptime: 10m48s
2020/04/02 16:31:08 workers: 4, corpus: 128 (6m42s ago), crashers: 0, restarts: 1/4804, execs: 3214498 (4935/sec), cover: 244, uptime: 10m51s
2020/04/02 16:31:11 workers: 4, corpus: 128 (6m45s ago), crashers: 0, restarts: 1/4809, execs: 3217878 (4917/sec), cover: 244, uptime: 10m54s
```

The details are explained on the [`go-fuzz homepage`](https://github.com/dvyukov/go-fuzz), but the two main fields:

- `corpus` is the size of input data.  If you look in the `corpus/` folder, you will see some "hand-made" data I seed it with, as well
  as data auto-generated by `go-fuzz` when it found interesting test data.  Each file is single input sample.  `go-fuzz` may create new
  `corpus` files during a run, feel free to include those in a PR if they prove useful.
- `crashers` is the number of test inputs that caused a panic.  Keep an eye on it as sometimes `go-fuzz` will find a series of related
  panics that it doesn't recognize as related, and the number may quickly balloon.  The easiest way to use these crash outputs is to add
  them to the `TestFuzzCrashers` test in `rlp/fuzz_test.go` (and then hopefully submit a PR which causes the test to pass!).

The fuzz test itself is implemented in `fuzz.go`, and simply decodes and re-encodes the input data, and panics if reencoding fails.
